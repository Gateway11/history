package com.rokid.simple;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

import com.rokid.rkcommonlibrary.config.RKProjectConfig;
import com.rokid.rkcommonlibrary.mediaplayer.RKMediaDataBean;
import com.rokid.rkcommonlibrary.mediaplayer.RKMediaPlayer;
import com.rokid.rkcommonlibrary.utils.RKLogUtil;

import java.io.File;

/**
 * Created by Bassam on 16/8/8.
 */
public class MediaTestActivity extends Activity {
    private RKMediaDataBean rkMediaDataBean;
    private RKMediaPlayer rkMediaPlayer;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        RKLogUtil.d(RKProjectConfig.CACHE_VOICE_DIR + File.separator + "test.mp3");
        rkMediaDataBean = new RKMediaDataBean(true);
//        rkMediaDataBean.setFilePath("http://cdn.hhdd" +
//                ".com/books/media/f25efa4b-d6df-41e7-9242-44091e929c7a.mp3");
        rkMediaDataBean.setFilePath(RKProjectConfig.CACHE_VOICE_DIR + File.separator + "test.mp3");
        rkMediaPlayer = new RKMediaPlayer(this, rkMediaDataBean,null);
        rkMediaPlayer.start();
    }

    @Override
    protected void onNewIntent(Intent intent) {
        super.onNewIntent(intent);
        if (intent.getAction().equals("com.rokid.simple.play")) {
            rkMediaPlayer.start();
        } else if (intent.getAction().equals("com.rokid.simple.resume")) {
            rkMediaPlayer.resume();
        } else if (intent.getAction().equals("com.rokid.simple.restart")) {
            rkMediaPlayer.restart();
        } else if (intent.getAction().equals("com.rokid.simple.pause")) {
            rkMediaPlayer.pause();
        } else if (intent.getAction().equals("com.rokid.simple.stop")) {
            rkMediaPlayer.stop();
        }
    }

    @Override
    protected void onPause() {
        super.onPause();
        rkMediaPlayer.stop();
        finish();
    }
}
